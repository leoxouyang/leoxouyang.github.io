---
const { frontmatter } = Astro.props;
---

<html lang="zh-CN">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>{frontmatter.title} | 欧阳小司</title>
    </head>

    <body>
        {/* 顶部导航栏 */}
        <header class="topbar">
            <div class="topbar-inner">
                <a class="brand" href="/">Zhenghao Lu</a>
                <nav class="nav">
                    <a href="/blog">Blog</a>
                    <a href="/resume">Resume</a>
                    <a href="/欧阳小司">欧阳小司</a>
                </nav>
            </div>
        </header>

        {/* Hero Section if image exists */}
        {
            frontmatter.heroImage && (
                <div class="hero">
                    <div class="hero-image-container">
                        <img
                            src={frontmatter.heroImage}
                            alt=""
                            class="hero-image"
                        />
                        <div class="hero-overlay" />
                    </div>
                    <div class="hero-content">
                        <h1 class="hero-title">{frontmatter.title}</h1>
                        <div class="hero-meta">
                            <time>{frontmatter.date}</time>
                        </div>
                    </div>
                </div>
            )
        }

        <main class="container">
            <article class="content">
                {
                    !frontmatter.heroImage && (
                        <>
                            <h1>{frontmatter.title}</h1>
                            <div class="meta">
                                <time>{frontmatter.date}</time>
                            </div>
                        </>
                    )
                }
                <slot />
            </article>
        </main>

        <style>
            /* 全局样式 */
            :global(*),
            :global(*::before),
            :global(*::after) {
                box-sizing: border-box;
            }

            :global(html, body) {
                min-height: 100%;
                margin: 0;
                background: #fff;
                font-family:
                    system-ui,
                    -apple-system,
                    BlinkMacSystemFont,
                    "Segoe UI",
                    Roboto,
                    sans-serif;
                color: #333;
                line-height: 1.6;
            }

            /* 顶栏 */
            .topbar {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                background: #fff;
                border-bottom: 1px solid #eee;
                z-index: 100;
            }
            .topbar-inner {
                max-width: 900px;
                margin: 0 auto;
                padding: 14px 24px;
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            .brand {
                text-decoration: none;
                color: #111;
                font-weight: 600;
                font-size: 14px;
                opacity: 0.9;
                white-space: nowrap;
            }
            .nav {
                display: flex;
                gap: 16px;
                align-items: center;
            }
            .nav a {
                text-decoration: none;
                color: #111;
                font-size: 14px;
                opacity: 0.75;
                line-height: 1;
                display: flex;
                align-items: center;
            }
            .nav a:hover {
                opacity: 1;
            }

            /* Hero Section */
            .hero {
                position: relative;
                width: 100%;
                height: 60vh;
                min-height: 400px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-top: 53px; /* Height of topbar roughly */
                overflow: hidden;
            }

            .hero-image-container {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 0;
            }

            .hero-image {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

            .hero-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(
                    0,
                    0,
                    0,
                    0.4
                ); /* Dark overlay for text readability */
            }

            .hero-content {
                position: relative;
                text-align: center;
                color: #fff;
                padding: 24px;
                max-width: 800px;
                z-index: 1;
            }

            .hero-title {
                font-size: 2.5rem;
                font-weight: 700;
                margin: 0 0 16px;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }

            .hero-meta {
                font-size: 1rem;
                opacity: 0.9;
            }

            /* 主要内容区域 */
            .container {
                max-width: 700px;
                margin: 0 auto;
                /* Adjust padding based on whether hero exists or not */
                padding: 48px 24px 48px;
            }

            /* If no hero image, add top padding to account for fixed header */
            :not(.hero) + .container {
                padding-top: 96px;
            }

            .meta {
                color: #888;
                font-size: 14px;
                margin-bottom: 24px;
                padding-bottom: 24px;
                border-bottom: 1px solid #eee;
            }

            /* Markdown 内容样式 */
            .content :global(h1) {
                font-size: 2em;
                margin-bottom: 0.5em;
            }
            /* If hero exists, the first h1 in content might be redundant if it matches title. 
         But usually markdown content starts with h1. We can let it be or hide it if it's the title. */

            .content :global(h2) {
                font-size: 1.5em;
                margin-top: 1.5em;
                margin-bottom: 0.5em;
            }
            .content :global(p) {
                margin-bottom: 1em;
            }
            .content :global(a) {
                color: #000;
                text-decoration: underline;
            }

            /* Image constraints in markdown content */
            .content :global(img) {
                max-width: 100%;
                height: auto;
                display: block;
                margin: 24px auto;
            }
        </style>
    </body>
</html>
